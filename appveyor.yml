# configuration for "master" branch
-
  image: Visual Studio 2017 Preview
  branches:
      only:
        - master
  version: 1.0.{build}
  environment:
    ANDROID_HOME: "C:\\android-sdk-windows"
    COVERALLS_TOKEN: jLYKFVgST432LzbZeyLnLpoteXwQLveBw
    GITHUB_USERNAME:
      secure: 4l81stjUdh712ndqnwBryw==
    GITHUB_TOKEN:
      secure: TukU0LPvpoN1xkqjNNI8Ij7OxMnCmJxRnj6CsCDcAu+euK3eRTPRFJZl94na2+68
    NUGET_SOURCE: https://www.nuget.org/api/v2/package
    NUGET_APIKEY:
      secure: cANUegIQhgeZ7Yg4sosXNGmFF33i77nTriEjaeniQ4S26btcwYsopOO3qXKlbrvf
    SIGNCLIENT_SECRET:
      secure: TGMBTw6fMix/D/hPuoS6J6XQdY5L1hlL6JPpzgKBbDg=
    SIGNCLIENT_USER:
      secure: wwm115V/GOIkqGLbOom1aGBqkMQy6REFKPaG8P0b4//f0r01dc9pTWruOxLyi4X8
  init:
  - cd "C:\projects\reactiveui"
  install:
  - nuget install SignClient -Version 0.9.0 -SolutionDir %APPVEYOR_BUILD_FOLDER% -Verbosity quiet -ExcludeVersion
  build_script:
  - ./build.cmd
  cache:
  - tools -> build.*
  - src\packages -> **\packages.config
  - '%USERPROFILE%\.nuget\packages -> **\project.json'
  artifacts:
  - path: artifacts/*.nupkg
  - path: '**/bin/*'
  - path: '**/*.binlog'
  - path: src/ReactiveUI.**/Events_*.cs
  test: off
  on_failure:
  - ps: Get-ChildItem *.binlog -recurse | % { Push-AppveyorArtifact $_.FullName -FileName $_.Name }
  on_finish:
  - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))

# configuration for "develop" branch
-
  image: Visual Studio 2017
  branches:
      except:
          - master
  skip_branch_with_pr: true
  version: 1.0.{build}
  environment:
    ANDROID_HOME: "C:\\android-sdk-windows"
    COVERALLS_TOKEN: jLYKFVgST432LzbZeyLnLpoteXwQLveBw
    NUGET_SOURCE: https://www.myget.org/F/reactiveui/api/v2/package
    NUGET_APIKEY:
      secure: KTszzEEs33kbeqkpGGMvM58elvNLeTJhytpv7s9fPHoY4ZZmk5fMwofKDtK2lhno
    SIGNCLIENT_SECRET:
      secure: TGMBTw6fMix/D/hPuoS6J6XQdY5L1hlL6JPpzgKBbDg=
    SIGNCLIENT_USER:
      secure: wwm115V/GOIkqGLbOom1aGBqkMQy6REFKPaG8P0b4//f0r01dc9pTWruOxLyi4X8
  init:
  - cd "C:\projects\reactiveui"
  install:
  - nuget install SignClient -Version 0.9.0 -SolutionDir %APPVEYOR_BUILD_FOLDER% -Verbosity quiet -ExcludeVersion
  build_script:
  - ./build.cmd
  cache:
  - tools -> build.*
  - src\packages -> **\packages.config
  - '%USERPROFILE%\.nuget\packages -> **\project.json'
  artifacts:
  - path: artifacts/*.nupkg
  - path: '**/bin/*'
  - path: '**/*.binlog'
  - path: src/ReactiveUI.**/Events_*.cs
  test: off
  on_failure:
  - ps: Get-ChildItem *.binlog -recurse | % { Push-AppveyorArtifact $_.FullName -FileName $_.Name }
  on_finish:
  - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))
